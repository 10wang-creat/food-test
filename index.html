<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>姊妹小吃 - 電子菜單</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="30" r="1.5" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="70" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="70" cy="80" r="2.5" fill="rgba(255,255,255,0.1)"/></svg>');
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
        }

        .header p {
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .category-tabs {
            display: flex;
            background: #f8f9fa;
            padding: 8px;
            gap: 6px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            flex: 1;
            min-width: 80px;
            padding: 10px 12px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 15px;
            white-space: nowrap;
        }

        .tab.active {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border-color: #ee5a52;
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(238,90,82,0.3);
        }

        .menu-content {
            padding: 15px;
            max-height: 65vh;
            overflow-y: auto;
        }

        .menu-category {
            display: none;
        }

        .menu-category.active {
            display: block;
        }

        .menu-item {
            background: white;
            border-radius: 16px;
            padding: 18px;
            margin-bottom: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 1px solid #f1f3f4;
            transition: all 0.3s ease;
        }

        .menu-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .item-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
        }

        .item-name {
            font-size: 18px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .item-price {
            font-size: 20px;
            font-weight: 700;
            color: #e74c3c;
        }

        .price-options {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .price-option {
            flex: 1;
            text-align: center;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .price-option:hover {
            background: #e3f2fd;
            transform: translateY(-1px);
        }

        .price-option.selected {
            background: #1976d2;
            color: white;
            border-color: #1565c0;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(25,118,210,0.3);
        }

        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .option {
            padding: 8px 12px;
            background: #e3f2fd;
            color: #1976d2;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .option:hover, .option.selected {
            background: #1976d2;
            color: white;
            transform: scale(1.05);
        }

        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(238,90,82,0.4);
        }

        .quantity-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .quantity {
            font-size: 18px;
            font-weight: 700;
            min-width: 30px;
            text-align: center;
        }

        .cart {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 8px 25px rgba(46,204,113,0.4);
            cursor: pointer;
            font-weight: 700;
            font-size: 16px;
            border: none;
            transition: all 0.3s ease;
            z-index: 1000;
            min-width: 200px;
            text-align: center;
        }

        .cart:hover {
            transform: translateX(-50%) translateY(-3px);
            box-shadow: 0 12px 30px rgba(46,204,113,0.5);
        }

        .cart.hidden {
            display: none;
        }

        .customer-info {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .customer-info h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .info-row {
            margin-bottom: 12px;
        }

        .info-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
        }

        .info-input:focus {
            outline: none;
            border-color: #ff6b6b;
        }

        .service-type {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .service-option {
            flex: 1;
            padding: 12px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .service-option:hover {
            border-color: #ff6b6b;
            transform: translateY(-1px);
        }

        .service-option.selected {
            background: #ff6b6b;
            color: white;
            border-color: #ee5a52;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 8px;
        }

        .cart-qty-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-qty-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(238,90,82,0.4);
        }

        .cart-qty-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .cart-qty {
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }

        .remove-item-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .remove-item-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .cart-total {
            font-size: 20px;
            font-weight: 700;
            color: #e74c3c;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn.primary {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .modal-btn.secondary {
            background: #bdc3c7;
            color: white;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            padding: 12px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 12px;
        }

        @media (max-width: 480px) {
            .container {
                border-radius: 0;
                min-height: 100vh;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .tab {
                font-size: 11px;
                padding: 8px 10px;
                min-width: 70px;
            }
            
            .category-tabs {
                padding: 6px;
                gap: 4px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>姊妹小吃</h1>
            <p>炒麵/炒米粉/麻油麵線專賣 · 手機點餐免排隊</p>
        </div>

        <div class="category-tabs">
            <div class="tab active" onclick="showCategory('noodles')">麵飯類</div>
            <div class="tab" onclick="showCategory('soups')">湯品類</div>
            <div class="tab" onclick="showCategory('sesame')">麻油/藥膳</div>
            <div class="tab" onclick="showCategory('sides')">小菜類</div>
        </div>

        <div class="menu-content">
            <!-- 麵飯類 -->
            <div id="noodles" class="menu-category active">
                <div class="section-title">🍜 麵飯類</div>
                
                <div class="menu-item">
                    <div class="item-name">綜合(米粉+麵)</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="50" onclick="selectPrice('noodles-1', this, 50)">小 $50</div>
                        <div class="price-option" data-price="60" onclick="selectPrice('noodles-1', this, 60)">大 $60</div>
                    </div>
                    <div class="options">
                        <div class="option">不加蒜泥</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-1', -1)">-</button>
                        <span class="quantity" id="qty-noodles-1">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-1', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">炒麵</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="50" onclick="selectPrice('noodles-2', this, 50)">小 $50</div>
                        <div class="price-option" data-price="60" onclick="selectPrice('noodles-2', this, 60)">大 $60</div>
                    </div>
                    <div class="options">
                        <div class="option">不加蒜泥</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-2', -1)">-</button>
                        <span class="quantity" id="qty-noodles-2">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-2', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">炒米粉</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="50" onclick="selectPrice('noodles-3', this, 50)">小 $50</div>
                        <div class="price-option" data-price="60" onclick="selectPrice('noodles-3', this, 60)">大 $60</div>
                    </div>
                    <div class="options">
                        <div class="option">不加蒜泥</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-3', -1)">-</button>
                        <span class="quantity" id="qty-noodles-3">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-3', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">切仔乾麵</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="50" onclick="selectPrice('noodles-4', this, 50)">小 $50</div>
                        <div class="price-option" data-price="60" onclick="selectPrice('noodles-4', this, 60)">大 $60</div>
                    </div>
                    <div class="options">
                        <div class="option">油麵</div>
                        <div class="option">意麵</div>
                        <div class="option">米粉</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-4', -1)">-</button>
                        <span class="quantity" id="qty-noodles-4">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-4', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">切仔湯麵</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="50" onclick="selectPrice('noodles-5', this, 50)">小 $50</div>
                        <div class="price-option" data-price="60" onclick="selectPrice('noodles-5', this, 60)">大 $60</div>
                    </div>
                    <div class="options">
                        <div class="option">油麵</div>
                        <div class="option">意麵</div>
                        <div class="option">米粉</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-5', -1)">-</button>
                        <span class="quantity" id="qty-noodles-5">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-5', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">滷肉飯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="50" onclick="selectPrice('noodles-6', this, 50)">小 $50</div>
                        <div class="price-option" data-price="60" onclick="selectPrice('noodles-6', this, 60)">大 $60</div>
                    </div>
                    <div class="options">
                        <div class="option">加辣</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-6', -1)">-</button>
                        <span class="quantity" id="qty-noodles-6">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-6', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">抄手</div>
                    <div class="item-price">$70</div>
                    <div class="options">
                        <div class="option">加辣</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-7', -1)">-</button>
                        <span class="quantity" id="qty-noodles-7">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-7', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">爌肉飯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="70" onclick="selectPrice('noodles-8', this, 70)">小 $70</div>
                        <div class="price-option" data-price="80" onclick="selectPrice('noodles-8', this, 80)">大 $80</div>
                    </div>
                    <div class="options">
                        <div class="option">加辣</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-8', -1)">-</button>
                        <span class="quantity" id="qty-noodles-8">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-8', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">豬腳飯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="100" onclick="selectPrice('noodles-9', this, 100)">小 $100</div>
                        <div class="price-option" data-price="120" onclick="selectPrice('noodles-9', this, 120)">大 $120</div>
                    </div>
                    <div class="options">
                        <div class="option">加辣</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-9', -1)">-</button>
                        <span class="quantity" id="qty-noodles-9">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-9', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">豬腳麵線</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="100" onclick="selectPrice('noodles-10', this, 100)">小 $100</div>
                        <div class="price-option" data-price="120" onclick="selectPrice('noodles-10', this, 120)">大 $120</div>
                    </div>
                    <div class="options">
                        <div class="option">加辣</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-10', -1)">-</button>
                        <span class="quantity" id="qty-noodles-10">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-10', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">牛肉麵</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="130" onclick="selectPrice('noodles-11', this, 130)">小 $130</div>
                        <div class="price-option" data-price="150" onclick="selectPrice('noodles-11', this, 150)">大 $150</div>
                    </div>
                    <div class="options">
                        <div class="option">刀削</div>
                        <div class="option">油麵</div>
                        <div class="option">拉麵</div>
                        <div class="option">陽春</div>
                        <div class="option">意麵</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-11', -1)">-</button>
                        <span class="quantity" id="qty-noodles-11">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-11', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">滷肉便當</div>
                    <div class="item-price">$100</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-12', -1)">-</button>
                        <span class="quantity" id="qty-noodles-12">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-12', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">爌肉便當</div>
                    <div class="item-price">$130</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-13', -1)">-</button>
                        <span class="quantity" id="qty-noodles-13">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-13', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">豬腳便當</div>
                    <div class="item-price">$130</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-14', -1)">-</button>
                        <span class="quantity" id="qty-noodles-14">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-14', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">排骨便當</div>
                    <div class="item-price">$130</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('noodles-15', -1)">-</button>
                        <span class="quantity" id="qty-noodles-15">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('noodles-15', 1)">+</button>
                    </div>
                </div>
            </div>

            <!-- 湯品類 -->
            <div id="soups" class="menu-category">
                <div class="section-title">🍲 湯品類</div>
                
                <div class="menu-item">
                    <div class="item-name">豬血湯</div>
                    <div class="item-price">$40</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('soups-1', -1)">-</button>
                        <span class="quantity" id="qty-soups-1">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('soups-1', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">貢丸湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="50" onclick="selectPrice('soups-2', this, 50)">湯品 $50</div>
                        <div class="price-option" data-price="60" onclick="selectPrice('soups-2', this, 60)">加麵 $60</div>
                    </div>
                    <div class="options">
                        <div class="option">加油麵</div>
                        <div class="option">加米粉</div>
                        <div class="option">加意麵</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('soups-2', -1)">-</button>
                        <span class="quantity" id="qty-soups-2">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('soups-2', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">豬肝湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="50" onclick="selectPrice('soups-3', this, 50)">湯品 $50</div>
                        <div class="price-option" data-price="70" onclick="selectPrice('soups-3', this, 70)">加麵 $70</div>
                    </div>
                    <div class="options">
                        <div class="option">加油麵</div>
                        <div class="option">加米粉</div>
                        <div class="option">加意麵</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('soups-3', -1)">-</button>
                        <span class="quantity" id="qty-soups-3">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('soups-3', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">餛飩湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="50" onclick="selectPrice('soups-4', this, 50)">湯品 $50</div>
                        <div class="price-option" data-price="70" onclick="selectPrice('soups-4', this, 70)">加麵 $70</div>
                    </div>
                    <div class="options">
                        <div class="option">加油麵</div>
                        <div class="option">加米粉</div>
                        <div class="option">加意麵</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('soups-4', -1)">-</button>
                        <span class="quantity" id="qty-soups-4">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('soups-4', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">腰內肉湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="70" onclick="selectPrice('soups-5', this, 70)">湯品 $70</div>
                        <div class="price-option" data-price="90" onclick="selectPrice('soups-5', this, 90)">加麵 $90</div>
                    </div>
                    <div class="options">
                        <div class="option">加油麵</div>
                        <div class="option">加米粉</div>
                        <div class="option">加意麵</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('soups-5', -1)">-</button>
                        <span class="quantity" id="qty-soups-5">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('soups-5', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">鱸魚湯 (人氣湯品)</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="130" onclick="selectPrice('soups-6', this, 130)">湯品 $130</div>
                        <div class="price-option" data-price="150" onclick="selectPrice('soups-6', this, 150)">加麵 $150</div>
                    </div>
                    <div class="options">
                        <div class="option">加米酒</div>
                        <div class="option">加油麵</div>
                        <div class="option">加米粉</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('soups-6', -1)">-</button>
                        <span class="quantity" id="qty-soups-6">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('soups-6', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">麻油乾麵線</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="60" onclick="selectPrice('soups-7', this, 60)">小 $60</div>
                        <div class="price-option" data-price="70" onclick="selectPrice('soups-7', this, 70)">大 $70</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('soups-7', -1)">-</button>
                        <span class="quantity" id="qty-soups-7">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('soups-7', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">麻油湯麵線</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="70" onclick="selectPrice('soups-8', this, 70)">小 $70</div>
                        <div class="price-option" data-price="80" onclick="selectPrice('soups-8', this, 80)">大 $80</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('soups-8', -1)">-</button>
                        <span class="quantity" id="qty-soups-8">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('soups-8', 1)">+</button>
                    </div>
                </div>
            </div>

            <!-- 麻油/藥膳 -->
            <div id="sesame" class="menu-category">
                <div class="section-title">🌿 麻油/藥膳/湯品 (四季溫補養身)</div>
                
                <div class="menu-item">
                    <div class="item-name">麻油高麗菜湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="60" onclick="selectPrice('sesame-1', this, 60)">湯品 $60</div>
                        <div class="price-option" data-price="80" onclick="selectPrice('sesame-1', this, 80)">加麵線 $80</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sesame-1', -1)">-</button>
                        <span class="quantity" id="qty-sesame-1">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sesame-1', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">麻油米血湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="60" onclick="selectPrice('sesame-2', this, 60)">湯品 $60</div>
                        <div class="price-option" data-price="80" onclick="selectPrice('sesame-2', this, 80)">加麵線 $80</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sesame-2', -1)">-</button>
                        <span class="quantity" id="qty-sesame-2">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sesame-2', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">麻油腰內肉湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="90" onclick="selectPrice('sesame-3', this, 90)">湯品 $90</div>
                        <div class="price-option" data-price="110" onclick="selectPrice('sesame-3', this, 110)">加麵線 $110</div>
                    </div>
                    <div class="options">
                        <div class="option">加米酒</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sesame-3', -1)">-</button>
                        <span class="quantity" id="qty-sesame-3">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sesame-3', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">麻油雞湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="130" onclick="selectPrice('sesame-4', this, 130)">湯品 $130</div>
                        <div class="price-option" data-price="150" onclick="selectPrice('sesame-4', this, 150)">加麵線 $150</div>
                    </div>
                    <div class="options">
                        <div class="option">加米酒</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sesame-4', -1)">-</button>
                        <span class="quantity" id="qty-sesame-4">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sesame-4', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">麻油腰子湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="150" onclick="selectPrice('sesame-5', this, 150)">湯品 $150</div>
                        <div class="price-option" data-price="170" onclick="selectPrice('sesame-5', this, 170)">加麵線 $170</div>
                    </div>
                    <div class="options">
                        <div class="option">加米酒</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sesame-5', -1)">-</button>
                        <span class="quantity" id="qty-sesame-5">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sesame-5', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">麻油雞+腰子湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="180" onclick="selectPrice('sesame-6', this, 180)">湯品 $180</div>
                        <div class="price-option" data-price="200" onclick="selectPrice('sesame-6', this, 200)">加麵線 $200</div>
                    </div>
                    <div class="options">
                        <div class="option">加米酒</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sesame-6', -1)">-</button>
                        <span class="quantity" id="qty-sesame-6">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sesame-6', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">藥膳雞湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="130" onclick="selectPrice('sesame-7', this, 130)">湯品 $130</div>
                        <div class="price-option" data-price="150" onclick="selectPrice('sesame-7', this, 150)">加麵線 $150</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sesame-7', -1)">-</button>
                        <span class="quantity" id="qty-sesame-7">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sesame-7', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">藥膳豬腳湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="130" onclick="selectPrice('sesame-8', this, 130)">湯品 $130</div>
                        <div class="price-option" data-price="150" onclick="selectPrice('sesame-8', this, 150)">加麵線 $150</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sesame-8', -1)">-</button>
                        <span class="quantity" id="qty-sesame-8">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sesame-8', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">藥膳羊肉湯</div>
                    <div class="price-options">
                        <div class="price-option selected" data-price="130" onclick="selectPrice('sesame-9', this, 130)">湯品 $130</div>
                        <div class="price-option" data-price="150" onclick="selectPrice('sesame-9', this, 150)">加麵線 $150</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sesame-9', -1)">-</button>
                        <span class="quantity" id="qty-sesame-9">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sesame-9', 1)">+</button>
                    </div>
                </div>
            </div>

            <!-- 小菜類 -->
            <div id="sides" class="menu-category">
                <div class="section-title">🥬 小菜類</div>
                
                <div class="menu-item">
                    <div class="item-name">白飯</div>
                    <div class="item-price">$15</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-1', -1)">-</button>
                        <span class="quantity" id="qty-sides-1">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-1', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">滷蛋/顆</div>
                    <div class="item-price">$15</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-2', -1)">-</button>
                        <span class="quantity" id="qty-sides-2">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-2', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">爌肉切盤</div>
                    <div class="item-price">$100</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-3', -1)">-</button>
                        <span class="quantity" id="qty-sides-3">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-3', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">炒腰子</div>
                    <div class="item-price">$200</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-4', -1)">-</button>
                        <span class="quantity" id="qty-sides-4">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-4', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">油豆腐</div>
                    <div class="item-price">$40</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-5', -1)">-</button>
                        <span class="quantity" id="qty-sides-5">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-5', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">豬皮</div>
                    <div class="item-price">$50</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-6', -1)">-</button>
                        <span class="quantity" id="qty-sides-6">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-6', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">燙青菜</div>
                    <div class="item-price">$50</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-7', -1)">-</button>
                        <span class="quantity" id="qty-sides-7">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-7', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">豬腳一份</div>
                    <div class="item-price">$130</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-8', -1)">-</button>
                        <span class="quantity" id="qty-sides-8">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-8', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">小魚乾辣椒醬</div>
                    <div class="item-price">$50</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-9', -1)">-</button>
                        <span class="quantity" id="qty-sides-9">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-9', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">滷白菜</div>
                    <div class="item-price">$50</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-10', -1)">-</button>
                        <span class="quantity" id="qty-sides-10">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-10', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">滷筍絲</div>
                    <div class="item-price">$50</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-11', -1)">-</button>
                        <span class="quantity" id="qty-sides-11">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-11', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">燙麻油豬肝</div>
                    <div class="item-price">$70</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-12', -1)">-</button>
                        <span class="quantity" id="qty-sides-12">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-12', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">腰內肉切盤</div>
                    <div class="item-price">$100</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-13', -1)">-</button>
                        <span class="quantity" id="qty-sides-13">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-13', 1)">+</button>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="item-name">小魚乾辣椒醬</div>
                    <div class="item-price">$200</div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity('sides-14', -1)">-</button>
                        <span class="quantity" id="qty-sides-14">0</span>
                        <button class="quantity-btn" onclick="changeQuantity('sides-14', 1)">+</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 購物車按鈕 -->
    <button class="cart hidden" id="cartBtn" onclick="showCart()">
        <span id="cartText">我的點餐明細</span>
    </button>

    <!-- 購物車彈窗 -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <h2>📝 訂單明細</h2>
            
            <div id="cartItems"></div>
            <div class="cart-total" id="cartTotal">總計: $0</div>
            
            <!-- 顧客資訊 -->
            <div class="customer-info">
                <h3>👤 訂餐人資訊</h3>
                <div class="service-type">
                    <div class="service-option selected" onclick="selectServiceType(this, 'dine-in')">🍽️ 內用</div>
                    <div class="service-option" onclick="selectServiceType(this, 'takeout')">🥡 外帶</div>
                </div>
                <div class="info-row">
                    <input type="text" class="info-input" id="customerName" placeholder="請輸入姓名" maxlength="20">
                </div>
                <div class="info-row">
                    <input type="tel" class="info-input" id="customerPhone" placeholder="請輸入電話" maxlength="15">
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeCart()">繼續點餐</button>
                <button class="modal-btn primary" onclick="submitOrder()">送出訂單</button>
            </div>
        </div>
    </div>

    <script>
        // 購物車資料 - 現在包含價格和選項資訊
        let cart = {};
        
        // 選中的價格和選項
        let itemPrices = {};
        let itemOptions = {};
        
        // 服務類型 (內用/外帶)
        let serviceType = 'dine-in';
        
        // 選擇服務類型
        function selectServiceType(element, type) {
            // 移除其他選項的選中狀態
            document.querySelectorAll('.service-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // 設置當前選項為選中
            element.classList.add('selected');
            serviceType = type;
        }
        
        // 選擇價格選項
        function selectPrice(itemId, element, price) {
            // 移除同一項目中其他價格選項的選中狀態
            const priceOptions = element.parentElement.querySelectorAll('.price-option');
            priceOptions.forEach(option => option.classList.remove('selected'));
            
            // 設置當前選項為選中
            element.classList.add('selected');
            
            // 儲存選中的價格
            itemPrices[itemId] = price;
            
            // 更新購物車顯示
            updateCartButton();
        }
        
        const menuItems = {
            'noodles-1': { name: '綜合(米粉+麵)', prices: { small: 50, large: 60 }, options: ['不加蒜泥'] },
            'noodles-2': { name: '炒麵', prices: { small: 50, large: 60 }, options: ['不加蒜泥'] },
            'noodles-3': { name: '炒米粉', prices: { small: 50, large: 60 }, options: ['不加蒜泥'] },
            'noodles-4': { name: '切仔乾麵', prices: { small: 50, large: 60 }, options: ['油麵', '意麵', '米粉'] },
            'noodles-5': { name: '切仔湯麵', prices: { small: 50, large: 60 }, options: ['油麵', '意麵', '米粉'] },
            'noodles-6': { name: '滷肉飯', prices: { small: 50, large: 60 }, options: ['加辣'] },
            'noodles-7': { name: '抄手', prices: { single: 70 }, options: ['加辣'] },
            'noodles-8': { name: '爌肉飯', prices: { small: 70, large: 80 }, options: ['加辣'] },
            'noodles-9': { name: '豬腳飯', prices: { small: 100, large: 120 }, options: ['加辣'] },
            'noodles-10': { name: '豬腳麵線', prices: { small: 100, large: 120 }, options: ['加辣'] },
            'noodles-11': { name: '牛肉麵', prices: { small: 130, large: 150 }, options: ['刀削', '油麵', '拉麵', '陽春', '意麵'] },
            'noodles-12': { name: '滷肉便當', prices: { single: 100 }, options: [] },
            'noodles-13': { name: '爌肉便當', prices: { single: 130 }, options: [] },
            'noodles-14': { name: '豬腳便當', prices: { single: 130 }, options: [] },
            'noodles-15': { name: '排骨便當', prices: { single: 130 }, options: [] },
            
            'soups-1': { name: '豬血湯', prices: { single: 40 }, options: [] },
            'soups-2': { name: '貢丸湯', prices: { soup: 50, noodles: 60 }, options: ['加油麵', '加米粉', '加意麵'] },
            'soups-3': { name: '豬肝湯', prices: { soup: 50, noodles: 70 }, options: ['加油麵', '加米粉', '加意麵'] },
            'soups-4': { name: '餛飩湯', prices: { soup: 50, noodles: 70 }, options: ['加油麵', '加米粉', '加意麵'] },
            'soups-5': { name: '腰內肉湯', prices: { soup: 70, noodles: 90 }, options: ['加油麵', '加米粉', '加意麵'] },
            'soups-6': { name: '鱸魚湯 (人氣湯品)', prices: { soup: 130, noodles: 150 }, options: ['加米酒', '加油麵', '加米粉'] },
            'soups-7': { name: '麻油乾麵線', prices: { small: 60, large: 70 }, options: [] },
            'soups-8': { name: '麻油湯麵線', prices: { small: 70, large: 80 }, options: [] },
            
            'sesame-1': { name: '麻油高麗菜湯', prices: { soup: 60, noodles: 80 }, options: [] },
            'sesame-2': { name: '麻油米血湯', prices: { soup: 60, noodles: 80 }, options: [] },
            'sesame-3': { name: '麻油腰內肉湯', prices: { soup: 90, noodles: 110 }, options: ['加米酒'] },
            'sesame-4': { name: '麻油雞湯', prices: { soup: 130, noodles: 150 }, options: ['加米酒'] },
            'sesame-5': { name: '麻油腰子湯', prices: { soup: 150, noodles: 170 }, options: ['加米酒'] },
            'sesame-6': { name: '麻油雞+腰子湯', prices: { soup: 180, noodles: 200 }, options: ['加米酒'] },
            'sesame-7': { name: '藥膳雞湯', prices: { soup: 130, noodles: 150 }, options: [] },
            'sesame-8': { name: '藥膳豬腳湯', prices: { soup: 130, noodles: 150 }, options: [] },
            'sesame-9': { name: '藥膳羊肉湯', prices: { soup: 130, noodles: 150 }, options: [] },
            
            'sides-1': { name: '白飯', prices: { single: 15 }, options: [] },
            'sides-2': { name: '滷蛋/顆', prices: { single: 15 }, options: [] },
            'sides-3': { name: '爌肉切盤', prices: { single: 100 }, options: [] },
            'sides-4': { name: '炒腰子', prices: { single: 200 }, options: [] },
            'sides-5': { name: '油豆腐', prices: { single: 40 }, options: [] },
            'sides-6': { name: '豬皮', prices: { single: 50 }, options: [] },
            'sides-7': { name: '燙青菜', prices: { single: 50 }, options: [] },
            'sides-8': { name: '豬腳一份', prices: { single: 130 }, options: [] },
            'sides-9': { name: '小魚乾辣椒醬', prices: { single: 50 }, options: [] },
            'sides-10': { name: '滷白菜', prices: { single: 50 }, options: [] },
            'sides-11': { name: '滷筍絲', prices: { single: 50 }, options: [] },
            'sides-12': { name: '燙麻油豬肝', prices: { single: 70 }, options: [] },
            'sides-13': { name: '腰內肉切盤', prices: { single: 100 }, options: [] },
            'sides-14': { name: '小魚乾辣椒醬', prices: { single: 200 }, options: [] }
        };

        // 顯示分類
        function showCategory(category) {
            // 隱藏所有分類
            document.querySelectorAll('.menu-category').forEach(cat => {
                cat.classList.remove('active');
            });
            
            // 移除所有標籤的活動狀態
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // 顯示選中的分類
            document.getElementById(category).classList.add('active');
            
            // 啟動對應的標籤
            event.target.classList.add('active');
        }

        // 修改數量
        function changeQuantity(itemId, change) {
            const qtyElement = document.getElementById(`qty-${itemId}`);
            let currentQty = parseInt(qtyElement.textContent);
            let newQty = Math.max(0, currentQty + change);
            
            qtyElement.textContent = newQty;
            
            if (newQty > 0) {
                cart[itemId] = newQty;
            } else {
                delete cart[itemId];
                // 同時清除價格和選項資訊
                delete itemPrices[itemId];
                delete itemOptions[itemId];
            }
            
            updateCartButton();
        }

        // 在購物車中修改數量
        function changeCartQuantity(itemId, change) {
            if (!cart[itemId]) return;
            
            let newQty = cart[itemId] + change;
            
            if (newQty <= 0) {
                // 移除項目
                delete cart[itemId];
                delete itemPrices[itemId];
                delete itemOptions[itemId];
                
                // 更新主頁面的數量顯示
                const qtyElement = document.getElementById(`qty-${itemId}`);
                if (qtyElement) {
                    qtyElement.textContent = '0';
                }
            } else {
                cart[itemId] = newQty;
                
                // 更新主頁面的數量顯示
                const qtyElement = document.getElementById(`qty-${itemId}`);
                if (qtyElement) {
                    qtyElement.textContent = newQty;
                }
            }
            
            updateCartButton();
            showCart(); // 重新顯示購物車以更新內容
        }

        // 移除單個項目
        function removeCartItem(itemId) {
            delete cart[itemId];
            delete itemPrices[itemId];
            delete itemOptions[itemId];
            
            // 更新主頁面的數量顯示
            const qtyElement = document.getElementById(`qty-${itemId}`);
            if (qtyElement) {
                qtyElement.textContent = '0';
            }
            
            updateCartButton();
            showCart(); // 重新顯示購物車
        }

        // 更新購物車按鈕
        function updateCartButton() {
            const cartBtn = document.getElementById('cartBtn');
            const cartText = document.getElementById('cartText');
            
            const totalItems = Object.values(cart).reduce((sum, qty) => sum + qty, 0);
            const totalPrice = calculateTotal();
            
            if (totalItems > 0) {
                cartBtn.classList.remove('hidden');
                cartText.textContent = `我的點餐明細 (${totalItems}項) ${totalPrice}`;
            } else {
                cartBtn.classList.add('hidden');
            }
        }

        // 計算總價
        function calculateTotal() {
            let total = 0;
            for (let itemId in cart) {
                const price = itemPrices[itemId] || Object.values(menuItems[itemId].prices)[0];
                total += price * cart[itemId];
            }
            return total;
        }

        // 顯示購物車
        function showCart() {
            const cartModal = document.getElementById('cartModal');
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            cartItems.innerHTML = '';
            
            if (Object.keys(cart).length === 0) {
                cartItems.innerHTML = '<div style="text-align: center; color: #666; padding: 20px; white-space: nowrap;">您還沒點餐喔，請先選擇想吃的餐點～</div>';
            } else {
                for (let itemId in cart) {
                    const item = menuItems[itemId];
                    if (item) {
                        const price = itemPrices[itemId] || Object.values(item.prices)[0];
                        const subtotal = price * cart[itemId];
                        const selectedOptions = itemOptions[itemId] || [];
                        
                        const cartItem = document.createElement('div');
                        cartItem.className = 'cart-item';
                        cartItem.innerHTML = `
                            <div>
                                <div style="font-weight: 600;">${item.name}</div>
                                <div style="font-size: 14px; color: #666;">
                                    單價: ${price}
                                    ${selectedOptions.length > 0 ? ` | 選項: ${selectedOptions.join(', ')}` : ''}
                                </div>
                                <div class="cart-item-controls">
                                    <button class="cart-qty-btn" onclick="changeCartQuantity('${itemId}', -1)">-</button>
                                    <span class="cart-qty">${cart[itemId]}</span>
                                    <button class="cart-qty-btn" onclick="changeCartQuantity('${itemId}', 1)">+</button>
                                    <button class="remove-item-btn" onclick="removeCartItem('${itemId}')">移除</button>
                                </div>
                            </div>
                            <div style="font-weight: 700; color: #e74c3c;">${subtotal}</div>
                        `;
                        cartItems.appendChild(cartItem);
                    }
                }
            }
            
            cartTotal.textContent = `總計: ${calculateTotal()}`;
            cartModal.style.display = 'flex';
        }

        // 關閉購物車
        function closeCart() {
            document.getElementById('cartModal').style.display = 'none';
        }

        // 提交訂單
        function submitOrder() {
            if (Object.keys(cart).length === 0) {
                alert('購物車是空的！');
                return;
            }
            
            const customerName = document.getElementById('customerName').value.trim();
            const customerPhone = document.getElementById('customerPhone').value.trim();
            
            if (!customerName) {
                alert('請輸入姓名');
                return;
            }
            
            if (!customerPhone) {
                alert('請輸入電話');
                return;
            }
            
            // 獲取當前時間
            const now = new Date();
            const orderTime = `${now.getFullYear()}/${(now.getMonth()+1).toString().padStart(2,'0')}/${now.getDate().toString().padStart(2,'0')} ${now.getHours().toString().padStart(2,'0')}:${now.getMinutes().toString().padStart(2,'0')}`;
            
            // 用餐方式
            const serviceTypeText = serviceType === 'dine-in' ? '🍽️ 內用' : '🥡 外帶';
            
            let orderText = `📋 姊妹小吃訂單\n\n`;
            orderText += `🕐 訂單時間：${orderTime}\n`;
            orderText += `📍 用餐方式：${serviceTypeText}\n`;
            orderText += `👤 顾客姓名：${customerName}\n`;
            orderText += `📞 聯絡電話：${customerPhone}\n`;
            orderText += `─────────────────────\n`;
            orderText += `🍜 餐點明細：\n`;
            
            let total = 0;
            let totalItems = 0;
            
            for (let itemId in cart) {
                const item = menuItems[itemId];
                if (item) {
                    const price = itemPrices[itemId] || Object.values(item.prices)[0];
                    const subtotal = price * cart[itemId];
                    const selectedOptions = itemOptions[itemId] || [];
                    
                    total += subtotal;
                    totalItems += cart[itemId];
                    
                    orderText += `• ${item.name} × ${cart[itemId]} = ${subtotal}`;
                    if (selectedOptions.length > 0) {
                        orderText += ` (${selectedOptions.join(', ')})`;
                    }
                    orderText += '\n';
                }
            }
            
            orderText += `─────────────────────\n`;
            orderText += `📊 商品數量統計：共 ${totalItems} 項\n`;
            orderText += `💰 總金額：${total}\n\n`;
            
            if (serviceType === 'dine-in') {
                orderText += `🏪 內用桌號：請現場安排\n`;
            }
            
            orderText += `✅ 請確認訂單並回覆預計完成時間\n`;
            orderText += `❌ 如有問題請直接回覆說明`;
            
            // 使用 LINE URL Scheme 傳送訊息
            const lineUrl = `https://line.me/R/msg/text/?${encodeURIComponent(orderText)}`;
            
            // 開啟 LINE 傳送訊息
            window.open(lineUrl, '_blank');
            
            // 清空購物車
            cart = {};
            itemPrices = {};
            itemOptions = {};
            document.querySelectorAll('.quantity').forEach(qty => {
                qty.textContent = '0';
            });
            
            // 清空顧客資訊
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            
            updateCartButton();
            closeCart();
        }

        // 點擊選項
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('option')) {
                e.target.classList.toggle('selected');
                
                // 獲取當前項目的ID
                const menuItem = e.target.closest('.menu-item');
                const itemId = getItemIdFromElement(menuItem);
                
                if (itemId) {
                    // 收集所有選中的選項
                    const selectedOptions = [];
                    menuItem.querySelectorAll('.option.selected').forEach(option => {
                        selectedOptions.push(option.textContent);
                    });
                    
                    // 儲存選項
                    itemOptions[itemId] = selectedOptions;
                }
            }
        });
        
        // 從DOM元素獲取項目ID的輔助函數
        function getItemIdFromElement(menuItem) {
            const qtyElement = menuItem.querySelector('[id^="qty-"]');
            if (qtyElement) {
                return qtyElement.id.replace('qty-', '');
            }
            return null;
        }

        // 點擊彈窗外部關閉
        document.getElementById('cartModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCart();
            }
        });

        // 初始化價格
        document.addEventListener('DOMContentLoaded', function() {
            // 為每個項目設置默認價格
            for (let itemId in menuItems) {
                const item = menuItems[itemId];
                const defaultPrice = Object.values(item.prices)[0];
                itemPrices[itemId] = defaultPrice;
            }
        });
    </script>
</body>
</html>
